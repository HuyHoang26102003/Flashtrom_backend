import { CreateOrderDto } from './dto/create-order.dto';
import { UpdateOrderDto } from './dto/update-order.dto';
import { Order, OrderStatus, OrderCancellationReason } from './entities/order.entity';
import { ApiResponse } from 'src/utils/createResponse';
import { AddressBookRepository } from 'src/address_book/address_book.repository';
import { RestaurantsRepository } from 'src/restaurants/restaurants.repository';
import { CustomersRepository } from 'src/customers/customers.repository';
import { MenuItemsRepository } from 'src/menu_items/menu_items.repository';
import { MenuItemVariantsRepository } from 'src/menu_item_variants/menu_item_variants.repository';
import { DataSource, EntityManager, Repository } from 'typeorm';
import { CartItemsRepository } from 'src/cart_items/cart_items.repository';
import { CustomersGateway } from 'src/customers/customers.gateway';
import { DriversGateway } from 'src/drivers/drivers.gateway';
import { TransactionService } from 'src/transactions/transactions.service';
import { FWalletsRepository } from 'src/fwallets/fwallets.repository';
import { DriverStatsService } from 'src/driver_stats_records/driver_stats_records.service';
import { EventEmitter2 } from '@nestjs/event-emitter';
import { DriversService } from 'src/drivers/drivers.service';
import { RedisService } from 'src/redis/redis.service';
import { OrdersRepository } from './orders.repository';
export declare class OrdersService {
    private readonly ordersRepository;
    private readonly menuItemsRepository;
    private readonly menuItemVariantsRepository;
    private readonly addressBookRepository;
    private readonly customersRepository;
    private readonly driverStatsService;
    private readonly restaurantsRepository;
    private readonly dataSource;
    private readonly cartItemsRepository;
    private readonly orderRepository;
    private readonly customersGateway;
    private readonly driversGateway;
    private readonly transactionService;
    private readonly fWalletsRepository;
    private readonly eventEmitter;
    private readonly driverService;
    private readonly redisService;
    constructor(ordersRepository: Repository<Order>, menuItemsRepository: MenuItemsRepository, menuItemVariantsRepository: MenuItemVariantsRepository, addressBookRepository: AddressBookRepository, customersRepository: CustomersRepository, driverStatsService: DriverStatsService, restaurantsRepository: RestaurantsRepository, dataSource: DataSource, cartItemsRepository: CartItemsRepository, orderRepository: OrdersRepository, customersGateway: CustomersGateway, driversGateway: DriversGateway, transactionService: TransactionService, fWalletsRepository: FWalletsRepository, eventEmitter: EventEmitter2, driverService: DriversService, redisService: RedisService);
    createOrder(createOrderDto: CreateOrderDto): Promise<ApiResponse<any>>;
    assignDriver(orderId: string, driverId: string): Promise<void>;
    notifyOrderStatus(order: Order): Promise<void>;
    private updateMenuItemPurchaseCount;
    notifyRestaurantAndDriver(order: Order): Promise<ApiResponse<any>>;
    update(id: string, updateOrderDto: UpdateOrderDto, transactionalEntityManager?: EntityManager): Promise<ApiResponse<Order>>;
    updateOrderStatus(orderId: string, status: OrderStatus, transactionalEntityManager?: EntityManager): Promise<ApiResponse<Order>>;
    tipToDriver(orderId: string, tipAmount: number): Promise<ApiResponse<Order>>;
    findAll(): Promise<ApiResponse<Order[]>>;
    findOne(id: string): Promise<ApiResponse<Order>>;
    remove(id: string): Promise<ApiResponse<null>>;
    cancelOrder(orderId: string, cancelledBy: 'customer' | 'restaurant' | 'driver', cancelledById: string, reason: OrderCancellationReason, title: string, description: string): Promise<ApiResponse<Order>>;
    private canOrderBeCancelled;
    private validateOrderData;
    updateOrderPaymentStatus(orderId: string, paymentStatus: 'PENDING' | 'PAID' | 'FAILED', transactionalEntityManager?: EntityManager): Promise<ApiResponse<Order>>;
    findAllPaginated(page?: number, limit?: number): Promise<ApiResponse<{
        totalPages: number;
        currentPage: number;
        totalItems: number;
        items: Order[];
    }>>;
    private handleError;
}
